
<!DOCTYPE html>
<html lang="bg">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>–ù–æ–Ω –°—Ç–æ–ø –û—Ç—á–µ—Ç</title>
  <link rel="icon" href="icon.ico">
  <link rel="apple-touch-icon" href="icon-192.png">
  <style>
    body { font-family: Arial; background-color: #121212; color: white; margin: 0; padding: 0; }
    #login { text-align: center; padding: 50px; }
    #login input { padding: 10px; width: 200px; font-size: 18px; border-radius: 5px; border: none; }
    #login button { margin-top: 15px; padding: 10px 20px; font-size: 16px; border: none; border-radius: 5px; background: #2196f3; color: white; cursor: pointer; }
    #app { display: none; padding: 16px; max-width: 700px; margin: auto; }
    input, select { width: 100%; padding: 8px; margin: 4px 0; border-radius: 5px; border: none; font-size: 16px; }
    button.action { padding: 10px; border: none; border-radius: 5px; background: #2196f3; color: #fff; font-size: 16px; cursor: pointer; margin-top: 10px; width: 100%; }
    table { width: 100%; border-collapse: collapse; margin-top: 20px; }
    th, td { border-bottom: 1px solid #444; padding: 8px; text-align: left; }
    .summary { background: #1e1e1e; padding: 10px; border-radius: 5px; margin-top: 20px; }
  </style>
</head>
<body>
  <div id="login">
    <h2>üîê –í—ä–≤–µ–¥–∏ –ø–∞—Ä–æ–ª–∞</h2>
    <input type="password" id="password" placeholder="–ü–∞—Ä–æ–ª–∞">
    <br>
    <button onclick="checkPassword()">–í—Ö–æ–¥</button>
  </div>

  <div id="app">
    <h2 style="text-align:center;">üìã –ù–æ–Ω –°—Ç–æ–ø –û—Ç—á–µ—Ç</h2>
    <label>–î–∞—Ç–∞</label><input type="date" id="date">
    <label>–¢–∏–ø</label><select id="type"><option>–ü—Ä–∏—Ö–æ–¥</option><option>–†–∞–∑—Ö–æ–¥</option></select>
    <label>–ú–µ—Ç–æ–¥</label><select id="method"><option>–ö–µ—à</option><option>–ë–∞–Ω–∫–∞</option></select>
    <label>–°—É–º–∞</label><input type="number" id="amount">
    <label>–ë–µ–ª–µ–∂–∫–∞</label><input type="text" id="note">
    <button class="action" onclick="addRecord()">–î–æ–±–∞–≤–∏ –∑–∞–ø–∏—Å</button>
    <button class="action" onclick="generatePDF()">üñ®Ô∏è –ü—Ä–∏–Ω—Ç–∏—Ä–∞–π –≤ PDF</button>

    <div class="summary" id="summary"></div>
    <table id="recordsTable">
      <thead><tr><th>–î–∞—Ç–∞</th><th>–¢–∏–ø</th><th>–°—É–º–∞</th><th>–ú–µ—Ç–æ–¥</th><th>–ë–µ–ª–µ–∂–∫–∞</th></tr></thead>
      <tbody></tbody>
    </table>
  </div>

<script>
let records = [];

function checkPassword() {
  const pass = document.getElementById("password").value;
  if (pass === "7801") {
    document.getElementById("login").style.display = "none";
    document.getElementById("app").style.display = "block";
    renderTable();
  } else {
    alert("–ì—Ä–µ—à–Ω–∞ –ø–∞—Ä–æ–ª–∞!");
  }
}

function saveToLocal() {
  localStorage.setItem("nonstop_records", JSON.stringify(records));
}

function loadFromLocal() {
  const saved = localStorage.getItem("nonstop_records");
  if (saved) records = JSON.parse(saved);
}

function addRecord() {
  const date = document.getElementById("date").value;
  const type = document.getElementById("type").value;
  const method = document.getElementById("method").value;
  const amount = parseFloat(document.getElementById("amount").value);
  const note = document.getElementById("note").value;
  if (!date || isNaN(amount)) return alert("–ú–æ–ª—è –≤—ä–≤–µ–¥–∏ –¥–∞—Ç–∞ –∏ —Å—É–º–∞");
  records.push({ date, type, method, amount, note });
  saveToLocal();
  renderTable();
  clearForm();
}

function clearForm() {
  document.getElementById("date").value = "";
  document.getElementById("amount").value = "";
  document.getElementById("note").value = "";
}

function renderTable() {
  const tbody = document.querySelector("#recordsTable tbody");
  tbody.innerHTML = "";
  let income = 0, expense = 0, cashIn = 0, cashOut = 0, bankIn = 0, bankOut = 0;
  records.forEach(r => {
    const row = `<tr><td>${r.date}</td><td>${r.type}</td><td>${r.amount.toFixed(2)} –ª–≤</td><td>${r.method}</td><td>${r.note}</td></tr>`;
    tbody.innerHTML += row;
    if (r.type === "–ü—Ä–∏—Ö–æ–¥") income += r.amount;
    if (r.type === "–†–∞–∑—Ö–æ–¥") expense += r.amount;
    if (r.method === "–ö–µ—à" && r.type === "–ü—Ä–∏—Ö–æ–¥") cashIn += r.amount;
    if (r.method === "–ö–µ—à" && r.type === "–†–∞–∑—Ö–æ–¥") cashOut += r.amount;
    if (r.method === "–ë–∞–Ω–∫–∞" && r.type === "–ü—Ä–∏—Ö–æ–¥") bankIn += r.amount;
    if (r.method === "–ë–∞–Ω–∫–∞" && r.type === "–†–∞–∑—Ö–æ–¥") bankOut += r.amount;
  });
  const balance = income - expense;
  const cashBalance = cashIn - cashOut;
  const bankBalance = bankIn - bankOut;
  document.getElementById("summary").innerHTML = `
    <strong>–û–±—â–æ –ø—Ä–∏—Ö–æ–¥–∏:</strong> ${income.toFixed(2)} –ª–≤ |
    <strong>–û–±—â–æ —Ä–∞–∑—Ö–æ–¥–∏:</strong> ${expense.toFixed(2)} –ª–≤ |
    <strong>–ë–∞–ª–∞–Ω—Å:</strong> ${balance.toFixed(2)} –ª–≤<br>
    üíµ –ö–µ—à: ${cashBalance.toFixed(2)} –ª–≤ | üè¶ –ë–∞–Ω–∫–∞: ${bankBalance.toFixed(2)} –ª–≤`;
}

function generatePDF() {
  const clone = document.body.cloneNode(true);
  const elementsToHide = clone.querySelectorAll("button, input, select");
  elementsToHide.forEach(el => el.style.display = "none");
  const win = window.open("", "_blank");
  win.document.write("<html><head><title>PDF</title><style>body { font-family: Arial; }</style></head><body>" + clone.querySelector("#app").innerHTML + "</body></html>");
  win.document.close();
  win.focus();
  win.print();
}

loadFromLocal();
</script>
</body>
</html>
